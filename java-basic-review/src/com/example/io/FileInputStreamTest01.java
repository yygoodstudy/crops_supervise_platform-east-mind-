package com.example.io;


import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

/**
 * @Author yuanyao
 * @Date 2022/9/16
 */
public class FileInputStreamTest01 {
    public static void main(String[] args) throws IOException {
//        read1();
//        read2();
        read3();

    }

    private static void read1() throws IOException {
        FileInputStream stream = new FileInputStream("object.txt");
        byte[] bytes = new byte[33];
        StringBuilder sb = new StringBuilder();
        /*
         * ???FileInputStream??read????????????????????
         * stream.read(bytes, 0, bytes.length) != -1
         * bytes:??????????
         * 0??off????????????????????????õ•?????b[off]?ßµ?????????õ•?????b[off+1]?ßµ?????????
         * length??????????????????len???????bytes.length
         */
        int i = 1, b;
        while ((b = stream.read(bytes, 0, bytes.length)) != -1) {
            /*
                ??b??:??????¶∆??????????????????????????
                ????????????¶∆??bytes.length????????????????33?????????????????????????bytes
                new String(bytes, 0, b)????????????????????????????????????????bytes?????????????????????????????????????
                ????????????????????or??????????????????????????????????
                ??????????¶∆????????????????????????????b??????bytes?????,??????????¶∆????????????????b??????ùI????
                ???????b?????????new String(bytes, 0, b),???b?????????????????????????????????????????????¶≤?33-b???????????
                ?????
                ???????
                ?????FileInputStream?????????????????????????????????ª«?????????? ????GBK???????????????
                UTF-8???????????????????????byte???¯A?????????????????????????????????????????
             */
            String readStr = new String(bytes, 0, b);
            System.out.println("??" + i++ + "?¶≤???????????????" + b + ",???????????????" + readStr);
            sb.append(readStr);
        }

        System.out.println("??????ßÿ?????????????? " + sb);
    }

    /**
     * inputStream.read()??????????
     * ???????????????????????????????int????
     * ????????????¶¬???-1
     */
    private static void read2() throws IOException {
        FileInputStream stream = new FileInputStream("object.txt");
        int b, num = 0;
        while ((b = stream.read()) != -1) {
            num++;
            System.out.print((char) b); // int?????char
        }
        System.out.println("?????????" + num + "?????~");
    }

    /**
     * inputStream??read(byte[] bytes):?????????
     *
     * @throws IOException
     */
    public static void read3() throws IOException {
        FileInputStream stream = new FileInputStream("object.txt");
        byte[] bytes = new byte[88];
        int b, num = 1;
        StringBuilder sb = new StringBuilder();
        while ((b = stream.read(bytes)) != -1) {
            System.out.println("??" + num++ + "?¶∆??????????????" + b);
            String string = new String(bytes, 0, b);
            sb.append(string);
        }

        System.out.println("??????ßÿ????????????" + sb);
    }

}
